(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f62cb728"],{"74bd":function(e,t,c){},"76db":function(e,t,c){"use strict";c.r(t);c("b0c0");var o=c("7a23"),a={key:0,class:"text-center"},l={class:"card border-0 rounded-0 bg-dark text-white"},n=Object(o["createElementVNode"])("img",{style:{height:"70vh","background-image":"url(https://storage.googleapis.com/vue-course-api.appspot.com/jiangs2022vue3/1649503318659.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=UXZKvjIy7LwCITDs60RfAb%2BjMAxzeDVQT6DR8joBI3Am6utPx2gJZzKzBz%2FjSRqJlnmSxDC1IIBMOR59ONmBYiE9Ag%2F0QLSBzQ9CjuB0ufKqVC%2Fbdr6YpxKvGBD4Umk15ieZXk%2FEHW4umcZZ%2BMjE%2FVFG3y2yMGuGeZ5WOguoVdh%2BkJninCzHB44ifvqoMsZsc03YzAc570%2FZAlE2%2ByWvfK4mJVz46b%2FsK%2FOF4UXvZV%2Fs2XYYmU8fhioNjr6D6rLrnkS0KtqvxBtGstBMeMR81SRnrcfz10YxHBXxNN5%2FHxd1hl%2BSUod7%2BzBIjln6tV8%2BjhoR%2FiR0ipqpIdbY0D3rbA%3D%3D)","background-size":"cover","background-position":"center bottom","object-fit":"cover","background-attachment":"fixed","background-blend-mode":"multiply","background-color":"rgba(0, 0, 0, 0.6)"}},null,-1),r={class:"card-img-overlay d-flex flex-column justify-content-center align-item-center"},s=Object(o["createElementVNode"])("h2",{class:"card-title text-center fw-bold"},[Object(o["createTextVNode"])(" 購物車內沒東西"),Object(o["createElementVNode"])("br"),Object(o["createTextVNode"])("請至產品列表選購 ")],-1),d={class:"d-flex align-items-center justify-content-center mt-5"},i={type:"button",class:"btn btn-outline-light me-5"},m=Object(o["createTextVNode"])("返回首頁"),b={type:"button",class:"btn btn-light"},u=Object(o["createTextVNode"])("繼續購物"),p={key:1,class:"container mt-5 p-0"},j=Object(o["createStaticVNode"])('<h2 class="text-center mb-5 fw-bold">購物車</h2><div class="check-step row g-0 align-items-center text-center"><div class="col"><span class="fs-7">1</span><p class="m-3 text-soft">確認訂單</p><div class="step-bar"></div></div><div class="col"><span class="fs-7">2</span><p class="m-3 text-soft">建立訂單</p><div class="step-bar-none"></div></div><div class="col"><span class="fs-7">3</span><p class="m-3 text-soft">完成訂單</p><div class="step-bar-none"></div></div></div>',2),f=[j],O={key:2,class:"container mt-2 mt-md-10"},v={class:"row"},g={class:"col"},h=Object(o["createElementVNode"])("i",{class:"bi bi-trash"}," 清除全部購物車 ",-1),V=[h],N={class:"row g-0"},E={class:"col-3 col-md-2"},x=["alt","src"],y={class:"col-8 col-md-4 ms-2 m-md-2 d-flex justify-content-center align-items-center"},k={class:"card-body p-0"},C=["onClick"],B={class:"card-title fs-6 fw-bold text-soft m-0"},D={key:0,class:"text-success"},w=Object(o["createElementVNode"])("div",{class:"row"},[Object(o["createElementVNode"])("div",{class:"col-12 col-md-6"})],-1),M={class:"col-12 col-md-3 d-flex justify-content-center align-items-center"},$={class:"input-group product-num-group bg-light mt-1 mb-0 my-md-0"},S=["disabled","onClick"],I=Object(o["createElementVNode"])("i",{class:"bi bi-dash-lg"},null,-1),L=[I],F=["onUpdate:modelValue"],z=["disabled","onClick"],T=Object(o["createElementVNode"])("i",{class:"bi bi-plus-lg"},null,-1),q=[T],_={class:"col-1 col-md-1 md-2 d-flex justify-content-end align-items-center ms-auto"},P={class:"card-text mt-2 text-end"},U={class:"text-danger"},A=["disabled","onClick"],R=Object(o["createElementVNode"])("i",{class:"bi bi-trash3"},null,-1),Z=[R],K={class:"text-end"},Y={class:"mt-2 text-end bg-light border-top border-bottom text-secondary py-2"},G={key:0,class:"row mb-0 mb-md-5"},J={class:"col-12 col-md-6"},X=Object(o["createElementVNode"])("p",{class:"bg-soft m-0 p-3 text-white"},"顧客資訊",-1),H={class:"col p-5 bg-light"},Q={class:"mb-3"},W=Object(o["createElementVNode"])("label",{for:"email",class:"form-label"},[Object(o["createElementVNode"])("span",{class:"text-danger"},"*"),Object(o["createTextVNode"])("Email")],-1),ee={class:"mb-3"},te=Object(o["createElementVNode"])("label",{for:"name",class:"form-label"},[Object(o["createElementVNode"])("span",{class:"text-danger"},"*"),Object(o["createTextVNode"])("收件人姓名")],-1),ce={class:"mb-3"},oe=Object(o["createElementVNode"])("label",{for:"tel",class:"form-label"},[Object(o["createElementVNode"])("span",{class:"text-danger"},"*"),Object(o["createTextVNode"])("收件人電話")],-1),ae={class:"mb-3"},le=Object(o["createElementVNode"])("label",{for:"address",class:"form-label"},[Object(o["createElementVNode"])("span",{class:"text-danger"},"*"),Object(o["createTextVNode"])("收件人地址")],-1),ne={class:"mb-3"},re=Object(o["createElementVNode"])("label",{for:"message",class:"form-label"},"備註",-1),se={class:"col-12 col-md-6"},de=Object(o["createElementVNode"])("p",{class:"bg-soft m-0 p-3 text-white"},"訂單資訊",-1),ie={class:"d-flex my-3"},me=Object(o["createElementVNode"])("div",{class:"col fw-bold"},"小計：",-1),be={class:"col fw-bold text-end"},ue=Object(o["createElementVNode"])("div",{class:"d-flex"},[Object(o["createElementVNode"])("div",{class:"col fw-bold"},"運費："),Object(o["createElementVNode"])("div",{class:"col fw-bold text-end"},"NT$ 1,000")],-1),pe=Object(o["createElementVNode"])("div",{class:"d-flex mb-3"},[Object(o["createElementVNode"])("div",{class:"col fw-bold text-soft opacity-50"},"優惠促銷："),Object(o["createElementVNode"])("div",{class:"col fw-bold text-end text-soft opacity-50"}," - NT$ 1,000 ")],-1),je={key:0,class:"input-group mb-3 input-group-sm"},fe={class:"input-group-append"},Oe={key:1},ve={key:2},ge={class:"text-end text-success"},he={class:"mt-2 text-end bg-light border-top border-bottom text-secondary py-2 text-danger fs-5 fw-bold"},Ve={class:"text-end my-4 d-grid"};function Ne(e,t,c,j,h,I){var T=Object(o["resolveComponent"])("Loading"),R=Object(o["resolveComponent"])("RouterLink"),Ne=Object(o["resolveComponent"])("Field"),Ee=Object(o["resolveComponent"])("ErrorMessage"),xe=Object(o["resolveComponent"])("Form"),ye=Object(o["resolveComponent"])("DelModal");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(T,{active:h.isLoading,loader:"bars",color:"#236F6B"},null,8,["active"]),0==h.cartData.carts.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["createElementVNode"])("div",l,[n,Object(o["createElementVNode"])("div",r,[s,Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("button",i,[Object(o["createVNode"])(R,{class:"text-light",to:"/"},{default:Object(o["withCtx"])((function(){return[m]})),_:1})]),Object(o["createElementVNode"])("button",b,[Object(o["createVNode"])(R,{class:"text-dark",to:"/products"},{default:Object(o["withCtx"])((function(){return[u]})),_:1})])])])])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",p,f)),h.cartData.carts.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",O,[Object(o["createElementVNode"])("div",v,[Object(o["createElementVNode"])("div",g,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm mb-2",onClick:t[0]||(t[0]=function(e){return I.openAllDelProductModal(h.cartData)})},V),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(h.cartData.carts,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"card pt-2 border-top mb-3 border-0",key:t.id},[Object(o["createElementVNode"])("div",N,[Object(o["createElementVNode"])("div",E,[Object(o["createElementVNode"])("img",{alt:t.product.title,src:t.product.imageUrl,class:"img-fluid",style:{width:"100px",height:"100px","background-position":"center","object-fit":"cover"}},null,8,x)]),Object(o["createElementVNode"])("div",y,[Object(o["createElementVNode"])("div",k,[Object(o["createElementVNode"])("a",{href:"#",class:"d-block",onClick:Object(o["withModifiers"])((function(e){return I.getProduct(t.product.id)}),["prevent"])},[Object(o["createElementVNode"])("h5",B,Object(o["toDisplayString"])(t.product.title),1)],8,C),t.coupon?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",D,"已套用優惠券")):Object(o["createCommentVNode"])("",!0),w])]),Object(o["createElementVNode"])("div",M,[Object(o["createElementVNode"])("div",$,[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("button",{disabled:t.qty<=1||h.loadingItem===t.id,onClick:function(e){return I.updateCart(t,t.qty--)},class:"btn border-0",type:"button"},L,8,S)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none bg-light border","aria-describedby":"button-addon1","onUpdate:modelValue":function(e){return t.qty=e}},null,8,F),[[o["vModelText"],t.qty,void 0,{lazy:!0}]]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("button",{disabled:h.loadingItem===t.id,onClick:function(e){return I.updateCart(t,t.qty++)},class:"btn border-0",type:"button"},q,8,z)])])]),Object(o["createElementVNode"])("div",_,[Object(o["createElementVNode"])("p",P,[Object(o["createElementVNode"])("small",U,[Object(o["createElementVNode"])("div",{disabled:h.loadingItem===t.id,onClick:function(e){return I.openDelProductModal(t)}},Z,8,A)])])])]),Object(o["createElementVNode"])("div",K," 定價 "+Object(o["toDisplayString"])(e.$filters.currency(t.product.price)),1),Object(o["createElementVNode"])("div",Y," 小計 NT$ "+Object(o["toDisplayString"])(e.$filters.currency(t.final_total)),1)])})),128))])]),0!==h.cartData.carts.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",G,[Object(o["createElementVNode"])("div",J,[X,Object(o["createElementVNode"])("div",H,[Object(o["createVNode"])(xe,{ref:"form",onSubmit:I.createOrder},{default:Object(o["withCtx"])((function(e){var c=e.errors;return[Object(o["createElementVNode"])("div",Q,[W,Object(o["createVNode"])(Ne,{id:"email",name:"email",type:"email",class:Object(o["normalizeClass"])(["form-control rounded-0",{"is-invalid":c["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:h.form.user.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return h.form.user.email=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(Ee,{name:"email",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",ee,[te,Object(o["createVNode"])(Ne,{id:"name",name:"姓名",type:"text",class:Object(o["normalizeClass"])(["form-control rounded-0",{"is-invalid":c["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:h.form.user.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return h.form.user.name=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(Ee,{name:"姓名",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",ce,[oe,Object(o["createVNode"])(Ne,{id:"tel",name:"電話",type:"tel",class:Object(o["normalizeClass"])(["form-control rounded-0",{"is-invalid":c["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:h.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return h.form.user.tel=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(Ee,{name:"電話",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",ae,[le,Object(o["createVNode"])(Ne,{id:"address",name:"地址",type:"text",class:Object(o["normalizeClass"])(["form-control rounded-0",{"is-invalid":c["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:h.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return h.form.user.address=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(Ee,{name:"地址",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",ne,[re,Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"",id:"message",class:"form-control rounded-0",cols:"30",rows:"5","onUpdate:modelValue":t[5]||(t[5]=function(e){return h.form.message=e})},null,512),[[o["vModelText"],h.form.message]])])]})),_:1},8,["onSubmit"])])]),Object(o["createElementVNode"])("div",se,[de,Object(o["createVNode"])(xe,{ref:"form",class:"p-5 bg-light",onSubmit:I.createOrder},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",ie,[me,Object(o["createElementVNode"])("div",be," NT$ "+Object(o["toDisplayString"])(e.$filters.currency(h.cartData.total)),1)]),ue,pe,0!==h.cartData.carts.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",je,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control rounded-0","onUpdate:modelValue":t[6]||(t[6]=function(e){return h.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[o["vModelText"],h.coupon_code]]),Object(o["createElementVNode"])("div",fe,[Object(o["createElementVNode"])("button",{class:Object(o["normalizeClass"])(["btn btn-soft rounded-0",{disabled:""===h.coupon_code}]),type:"button",onClick:t[7]||(t[7]=function(){return I.addCouponCode&&I.addCouponCode.apply(I,arguments)})}," 套用優惠碼 ",2)])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Oe)),h.cartData.final_total!==h.cartData.total?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ve,[Object(o["createElementVNode"])("div",ge," 折扣價 "+Object(o["toDisplayString"])(e.$filters.currency(h.cartData.final_total)),1)])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",he," 結帳總金額 NT$ "+Object(o["toDisplayString"])(e.$filters.currency(h.cartData.final_total)),1)]})),_:1},8,["onSubmit"]),Object(o["createElementVNode"])("div",Ve,[Object(o["createElementVNode"])("button",{class:"btn btn-soft rounded-0",onClick:t[8]||(t[8]=function(){return I.createOrder&&I.createOrder.apply(I,arguments)})}," 送出訂單 ")])])])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(ye,{item:h.tempProduct,ref:"delModal",onDelItem:I.removeCartItem},null,8,["item","onDelItem"]),Object(o["createVNode"])(ye,{item:h.tempProduct,ref:"delAllModal",onDelItem:I.removeCart},null,8,["item","onDelItem"])],64)}var Ee=c("5530"),xe=(c("99af"),c("6ff1")),ye=c("cfb9"),ke={components:{DelModal:xe["a"]},data:function(){return{products:[],product:{},tempProduct:{},cartData:{carts:{}},loadingItem:"",isLoading:!1,coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},provide:function(){return{emitter:ye["a"]}},methods:{getProducts:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/products/all");this.isLoading=!0,this.$http.get(t).then((function(t){e.products=t.data.products,e.isLoading=!1}))},getProduct:function(e){this.$router.push("/product/".concat(e))},getCarts:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/cart")).then((function(t){e.isLoading=!1,e.cartData=t.data.data}))},openDelProductModal:function(e){this.tempProduct=Object(Ee["a"])({},e);var t=this.$refs.delModal;t.showModal()},openAllDelProductModal:function(e){this.cartData=Object(Ee["a"])({},e);var t=this.$refs.delAllModal;t.showModal()},removeCartItem:function(e){var t=this;this.loadingItem=e;var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/cart/").concat(this.tempProduct.id);this.isLoading=!0,this.$http.delete(c).then((function(e){t.$httpMessageState(e,"移除購物車品項"),t.loadingItem="";var c=t.$refs.delModal;c.hideModal(),t.getCarts(),t.isLoading=!1,ye["a"].emit("update-cart")}))},removeCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/carts");this.isLoading=!0,this.$http.delete(t).then((function(t){e.$httpMessageState(t,"移除全部購物車品項");var c=e.$refs.delAllModal;c.hideModal(),e.getCarts(),e.isLoading=!1,ye["a"].emit("update-cart")}))},updateCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/cart/").concat(e.id);this.isLoading=!0,this.loadingItem=e.id;var o={product_id:e.product_id,qty:e.qty};this.$http.put(c,{data:o}).then((function(){t.loadingItem="",t.getCarts(),t.isLoading=!1,ye["a"].emit("update-cart")}))},addCouponCode:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/coupon"),c={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:c}).then((function(t){e.$httpMessageState(t,"加入優惠券"),e.getCarts(),e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"加入優惠券")}))},createOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/order"),c=this.form;this.$http.post(t,{data:c}).then((function(t){t.data.success&&(e.$router.push("/check/".concat(t.data.orderId)),e.$refs.form.resetForm(),e.isLoading=!1)})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"建立訂單")}))}},mounted:function(){this.getProducts(),this.getCarts()}},Ce=(c("d579"),c("6b0d")),Be=c.n(Ce);const De=Be()(ke,[["render",Ne]]);t["default"]=De},b0c0:function(e,t,c){var o=c("83ab"),a=c("5e77").EXISTS,l=c("e330"),n=c("9bf2").f,r=Function.prototype,s=l(r.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,i=l(d.exec),m="name";o&&!a&&n(r,m,{configurable:!0,get:function(){try{return i(d,s(this))[1]}catch(e){return""}}})},d579:function(e,t,c){"use strict";c("74bd")}}]);
//# sourceMappingURL=chunk-f62cb728.1fae8119.js.map